<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>100 Prisoners Problem Simulator</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&family=Sora:wght@500;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="./style.css" />
</head>
<body class="is-loading">
  <div class="bg-orb orb-a"></div>
  <div class="bg-orb orb-b"></div>
  <div class="bg-grid"></div>
  <div id="pageLoader" class="page-loader" aria-hidden="true">
    <div class="loader-dot"></div>
  </div>

  <main class="app">
    <header class="topbar panel">
      <div class="brand">
        <img src="./images/gamelogo.png" alt="Game logo" class="brand-logo" />
        <div class="brand-text">
          <p class="brand-title">100 prisoner problem</p>
          <p class="brand-subtitle">strategy simulator</p>
        </div>
      </div>
      <button
        id="navToggle"
        class="nav-toggle"
        type="button"
        aria-expanded="false"
        aria-controls="primaryNav"
        aria-label="Toggle navigation"
      >
        <span></span>
        <span></span>
        <span></span>
      </button>
      <nav id="primaryNav" class="topnav" aria-label="Primary">
        <a href="#overview">Overview</a>
        <a href="#simulator">Simulator</a>
        <a href="#results">Results</a>
      </nav>
    </header>

    <header class="hero">
      <div class="hero-copy">
        <h1>100 Prisoners Problem</h1>
        <p>Interactive simulation for exploring the 100 prisoners strategy.</p>
        <ul class="hero-features">
          <li>Choose scenario size from 4 to 100 prisoners.</li>
          <li>Generate a new random box permutation anytime.</li>
          <li>Play manually in Custom Simulation mode.</li>
          <li>Run 1-100 automated simulations and compare success rate.</li>
          <li>Run statistical mode with 10,000 total simulations.</li>
          <li>Track progress live in status and output log panels.</li>
        </ul>
        <a class="hero-cta" href="#simulator">Try the simulation</a>
      </div>
    </header>

    <div class="content-stack">
      <section class="plain-section" id="overview">
        <h2>Rules</h2>
        <ul>
          <li>There are N prisoners and N boxes with a random permutation of numbers 1-N.</li>
          <li>Each prisoner may open at most N/2 boxes.</li>
          <li>The group succeeds only if every prisoner finds their own number.</li>
          <li>The cycle-following strategy performs much better than random guessing.</li>
        </ul>
        <ol>
          <li>Prisoner k opens box k first.</li>
          <li>The found number tells which box to open next.</li>
          <li>Repeat until the prisoner finds their own number or runs out of attempts.</li>
        </ol>
      </section>

      <section class="plain-section" id="howto">
        <h2>How to Use the App</h2>
        <ol>
          <li>In <strong>Setup</strong>, choose the number of prisoners and boxes.</li>
          <li>Click <strong>Generate New Matrix</strong> to create a new random layout.</li>
          <li>For manual testing, start <strong>Custom Simulation</strong> and click boxes.</li>
          <li>For automatic testing, enter the number of runs in <strong>Simulation Mode</strong> and run it.</li>
          <li>For larger analysis, use <strong>Run Statistical Mode (10,000)</strong>.</li>
          <li>Track detailed actions in <strong>Output Log</strong> and results in <strong>Simulation Summary</strong>.</li>
        </ol>
      </section>

      <section class="plain-section" id="modes">
        <h2>Modes</h2>
        <ul>
          <li><strong>Custom Simulation Mode:</strong> manually click boxes for each prisoner.</li>
          <li><strong>Simulation Mode:</strong> runs 1-100 simulations and reports success rate.</li>
          <li><strong>Statistical Mode:</strong> runs 100 batches of 100 simulations (10,000 total).</li>
        </ul>
      </section>

      <section class="sim-row" id="simulator">
        <div class="matrix-column">
          <section class="plain-section matrix-section">
            <div id="matrix" class="matrix"></div>
          </section>
        </div>

        <aside class="plain-section setup-section">
          <h2>Setup</h2>
          <div class="control-stack">
            <div class="control-block">
              <label for="sizeSelect">Number of Prisoners / Boxes</label>
              <select id="sizeSelect">
                <option value="4">4 (2x2)</option>
                <option value="9">9 (3x3)</option>
                <option value="16">16 (4x4)</option>
                <option value="36">36 (6x6)</option>
                <option value="64">64 (8x8)</option>
                <option value="100" selected>100 (10x10)</option>
              </select>
              <button id="generateBtn">Generate New Matrix</button>
              <button id="closeBtn">Close All Boxes</button>
            </div>

            <div class="control-block">
              <h3>1) Custom Simulation Mode</h3>
              <p>Manual play. Click boxes for the current prisoner.</p>
              <p id="currentPrisonerText" class="current-prisoner">Current prisoner: -</p>
              <button id="startCustomBtn">Start Custom Simulation</button>
            </div>

            <div class="control-block">
              <h3>2) Simulation Mode</h3>
              <label for="simRuns">Number of trials (1-100)</label>
              <input id="simRuns" type="number" min="1" max="100" value="1" />
              <button id="runSimulationBtn">Run Simulation Mode</button>
            </div>

            <div class="control-block">
              <h3>3) Statistical Mode</h3>
              <p>Runs 10,000 total simulations.</p>
              <button id="runStatsBtn">Run Statistical Mode (10,000)</button>
            </div>
          </div>
        </aside>
      </section>

      <section class="plain-section" id="results">
        <div class="results-grid">
          <div class="results-log">
            <h2>Output Log</h2>
            <pre id="outputLog">No output yet.</pre>
          </div>

          <div class="results-summary">
            <h2>Simulation Summary</h2>
            <pre id="summaryText">No summary yet.</pre>
          </div>

          <div class="results-status">
            <h2>Mode Status</h2>
            <p id="statusText">Ready.</p>
            <p id="turnText"></p>
          </div>
        </div>
      </section>
    </div>

    <footer class="site-footer panel">
      <div class="footer-brand">
        <img src="./images/gamelogo.png" alt="100 prisoner problem logo" class="footer-logo" />
        <div class="footer-brand-text">
          <p class="footer-title">100 prisoner problem</p>
        </div>
      </div>
      <nav class="footer-nav" aria-label="Footer">
        <a href="#overview">Overview</a>
        <a href="#simulator">Simulator</a>
        <a href="#results">Results</a>
      </nav>
      <p class="footer-copy-bottom">Â© 2026 All rights reserved.</p>
    </footer>
  </main>

  <script src="./script.js"></script>
</body>
</html>
